<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1180, user-scalable=yes"><!--PC 최소 PXF로 고정하기! 프로젝트에 따라 변경 가능성-->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="theme-color" content="#ffffff">
    <meta name="Description" content="사이트 설명">
    <!-- <link rel="shortcut icon" href="ico_url" type="image/x-icon"> -->
    <title>page1 Report</title> <!-- [페이지명 | 사이트명] -->
</head>
<body>
<div class="page page1" style="page-break-before:always">
    <div class="loading"><!-- s: 노출시 show 클래스 추가-->
          <div class="bx">
            Loading
          </div>
    </div>
    <header>
        <h1><span class="label_type"></span></h1>
        <span class="num">1</span>
    </header>
    <div class="container">
        <h2>1. 퀀트기술지표</h2>
        <div class="content">
            <div class="unit">
                <h3>기업개요</h3>
                <p class="desc"></p>
                <table class="tbl1">
                    <colgroup>
                        <col width="16.8%">
                        <col width="31.9%">
                        <col width="16.8%">
                    </colgroup>
                    <tr>
                        <th>섹터</th>
                        <td class="bg"><strong></strong></td>
                        <th>시총</th>
                        <td></td>
                    </tr>
                    <tr>
                        <th>대표테마</th>
                        <td colspan="3" id="keyTheme"><strong></strong></td>
                    </tr>
                    <tr>
                        <th>소속테마</th>
                        <td colspan="3" id="theme"><strong></strong></td>
                    </tr>
                </table>
            </div>
            <div class="bx_style s_grade">
                <h3 class="tit">기술경쟁력등급</h3>
                <div class="cont coln">
                    <div class="shrink ico_grade">
                        <strong></strong>
                    </div>
                    <div class="col txt">
                        <span>기술경쟁력등급(TCG)은 취득한 특허들을 평가하여 합산한 점수와 이 점수를 기반으로 한 업계순위에 근거하여 생성되었습니다.</span>
                    </div>
                </div>
            </div>
            <div class="bx_style s_score">
                <h3 class="tit">퀀트기술평가</h3>
                <div class="cont">
                    <div class="col3">
                        <div class="col score">
                            <h4>전체 기술주</h4>
                            <div class="point">
                                <span>상위</span><strong></strong><!-- <span>%</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 100%;"></em></div>
                            <!-- <p><strong></strong>개 기업 중</p> -->
                        </div>
                        <div class="col score">
                            <h4>섹터</h4>
                            <div class="point">
                                <span>상위</span><strong></strong><!-- <span>%</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 40%;"></em></div>
                            <!-- <p><strong></strong>개 기업 중</p> -->
                        </div>
                        <div class="col score">
                            <h4>대표 테마</h4>
                            <div class="point">
                                <strong></strong><!-- <span>위</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 80%;"></em></div>
                            <!-- <p><strong></strong>개 기업 중</p> -->
                        </div>
                    </div>
                    <div class="bx_desc">
                        기술력 순위는 특허 빅데이터 및 ㈜위즈도메인의 특허평가엔진(Patent Evaluation Engine)을 이용하여 산출합니다.<br/>
                        평가가 이루어지는 모든 특허 데이터는 특허청에서 제공 받은 정보를 기준으로 작성되었습니다.
                    </div>
                </div>
            </div>
            <div class="bx_style s_score">
                <h3 class="tit">기술투자매력도</h3>
                <div class="cont">
                    <div class="col3">
                        <div class="col score">
                            <h4>전체 기술주</h4>
                            <div class="point">
                                <span>상위</span><strong></strong><!-- <span>%</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 40%;"></em></div>
                            <!-- <p>전체 상장사 내 순위는 <strong></strong>개 기업 중</p> -->
                        </div>
                        <div class="col score">
                            <h4>섹터</h4>
                            <div class="point">
                                <span>상위</span><strong></strong><!-- <span>%</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 40%;"></em></div>
                            <!-- <p>대표 섹터 내 순위는 <strong></strong>개 기업 중</p> -->
                        </div>
                        <div class="col score">
                            <h4>대표 테마</h4>
                            <div class="point">
                                <strong></strong><!-- <span>위</span> -->
                            </div>
                            <strong class="score"></strong>
                            <div class="bar_color"><em class="fill" style="width: 40%;"></em></div>
                            <!-- <p>대표 테마 내 순위는 <strong></strong>개 기업 중</p> -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="bx_style">
                <h3 class="tit">기업가치추정</h3>
                <div class="cont_txt">
                    <p>
                        섹터 내 기업들의 평균적인 기술력 대비 주가에 비하여 <span class="isuKorNm"></span>의 기술력대비 주가의 상태는 <strong class="big"></strong> 되어 있습니다.<br/>
                    </p>
                    <div class="c_val">
                            <div class="inner"> 
                                <strong>저평가<em class=""></em></strong>
                                <strong>다소 저평가<em class=""></em></strong>
                                <strong>적정가치<em class=""></em></strong>
                                <strong>다소 고평가<em class=""></em></strong>
                                <strong>고평가<em class=""></em></strong>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    $(function(){
        let params = {bizNo: getParameter("bizNo"), isuSrtCd: getParameter("isuSrtCd")};
        let query = Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&');
        let url = 'https://c-api.10bagger.co.kr/v1/report/outline?' + query;

        fetch(url)
                .then(res => res.json())
                .then(data => {
                    $("#reportPage1 .desc").html(data.description);
                    $("#reportPage1 .bg").find("strong").html(data.keySectorNm);
                    $("#reportPage1 .tbl1").find("#keyTheme").find("strong").html(data.keyThemeNm);

                    var mktCap = data.mktCap.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + "억원 (" + data.mktCapScale + "주)";
                    $("#reportPage1 .tbl1").find("td:eq(1)").html(mktCap)

                    var themes = "";
                    $.each(data.themes, function(index, row){
                        themes += row.themeName + ", ";
                    });
                    themes = themes.slice(0, -2);
                    $("#reportPage1 .tbl1").find("#theme").find("strong").html(themes);

                    $("#reportPage1 .shrink.ico_grade").children().html(data.tcg);

                    var tcg = data.tcgRatio.split(" ");
                    var text = "<strong>동사의 기술 경쟁력은 " + data.tcg +  " 로 업계 " + " <u>" + data.tcgRatio + "</u>로 평가됩니다.</strong>";
                    $('#reportPage1 .col.txt').prepend(text);

                    /* $('#reportPage1 .col.score:eq(0)').children().eq(0).html(data.isuKorNm + " TSS"); */
                    $('#reportPage1 .col.score:eq(0)').children().eq(1).children().eq(1).html(data.rankTssPer + "%");
                    $('#reportPage1 .col.score:eq(0)').children().eq(2).html(data.rankTssMax +"개 기업 중 " + data.rankTss +"위");
                    $('#reportPage1 .col.score:eq(0)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTss, data.rankTssMax));
                    /* $('#reportPage1 .col.score:eq(0)').children().eq(4).children().html(data.rankTssMax); */

                    $('#reportPage1 .col.score:eq(1)').children().eq(1).children().eq(1).html(data.rankTssInKeySectorPer + "%");
                    $('#reportPage1 .col.score:eq(1)').children().eq(2).html(data.rankTssInKeySectorMax +"개 기업 중 " + data.rankTssInKeySector +"위");
                    $('#reportPage1 .col.score:eq(1)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTssInKeySector, data.rankTssInKeySectorMax));
                    /* $('#reportPage1 .col.score:eq(1)').children().eq(4).children().html(data.rankTssInKeySectorMax); */

                    $('#reportPage1 .col.score:eq(2)').children().eq(1).children().eq(0).html(data.rankTssInKeyTheme + "위");
                    $('#reportPage1 .col.score:eq(2)').children().eq(2).html(data.rankTssInKeyThemeMax + "개 기업 중 ");
                    $('#reportPage1 .col.score:eq(2)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTssInKeyTheme, data.rankTssInKeyThemeMax));
                    $('#reportPage1 .col.score:eq(2)').children().eq(4).children().html(data.rankTssInKeyThemeMax);

                    /* $('#reportPage1 .col.score:eq(3)').children().eq(0).html(data.isuKorNm + " 기술투자지수"); */
                    $('#reportPage1 .col.score:eq(3)').children().eq(1).children().eq(1).html(data.rankTiiPer + "%");
                    $('#reportPage1 .col.score:eq(3)').children().eq(2).html(data.rankTiiMax +"개 기업 중 " + data.rankTii +"위");
                    $('#reportPage1 .col.score:eq(3)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTii, data.rankTiiMax));
                    /* $('#reportPage1 .col.score:eq(3)').children().eq(4).children().html(data.rankTiiMax); */


                    $('#reportPage1 .col.score:eq(4)').children().eq(1).children().eq(1).html(data.rankTiiInKeySectorPer + "%");
                    $('#reportPage1 .col.score:eq(4)').children().eq(2).html(data.rankTiiInKeySectorMax + "개 기업 중 " + data.rankTiiInKeySector +"위");
                    $('#reportPage1 .col.score:eq(4)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTiiInKeySector, data.rankTiiInKeySectorMax));
                    /* $('#reportPage1 .col.score:eq(4)').children().eq(4).children().html(data.rankTiiInKeySectorMax); */

                    $('#reportPage1 .col.score:eq(5)').children().eq(1).children().eq(0).html(data.rankTiiInKeyTheme + "위");
                    $('#reportPage1 .col.score:eq(5)').children().eq(2).html(data.rankTiiInKeyThemeMax + "개 기업 중 ");
                    $('#reportPage1 .col.score:eq(5)').children().eq(3).children().eq(0).css('width',calcPercent(data.rankTiiInKeyTheme, data.rankTiiInKeyThemeMax));
                    $('#reportPage1 .col.score:eq(5)').children().eq(4).children().html(data.rankTiiInKeyThemeMax);

                    $('#reportPage1 .big:eq(0)').html(data.estimation);
                    //$('#reportPage1 .big:eq(1)').html((data.industryAnnualGrowth * 100).toFixed(1) + "%");

                    if(data.estimation == "저평가"){
                        $('#reportPage1 .inner').children().eq(0).children().addClass("posi");
                    }
                    else if(data.estimation == "다소 저평가"){
                        $('#reportPage1 .inner').children().eq(1).children().addClass("posi");
                    }
                    else if(data.estimation == "적정"){
                        $('#reportPage1 .inner').children().eq(2).children().addClass("posi");
                    }
                    else if(data.estimation == "다소 고평가"){
                        $('#reportPage1 .inner').children().eq(3).children().addClass("posi");
                    }
                    else if(data.estimation == "고평가"){
                        $('#reportPage1 .inner').children().eq(4).children().addClass("posi");
                    }

                })
                .catch(function (error) {
                    console.log('request failed', error)
                });


    })

</script>
</body>
</html>