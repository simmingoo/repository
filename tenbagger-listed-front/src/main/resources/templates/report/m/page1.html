<!DOCTYPE html>
<html lang="ko">
	<head>
	  <meta charset="UTF-8">
	  <meta http-equiv="X-UA-Compatible" content="ie=edge">
	  <meta name="theme-color" content="#ffffff">
	  <meta name="Description" content="사이트 설명">
	  <title>page1 Report</title> <!-- [페이지명 | 사이트명] -->
	</head>
<body>
<div class="page page1">
	<div class="loading"><!-- s: 노출시 show 클래스 추가-->
		  <div class="bx">
		    Loading
		  </div>
	  </div>
		<header>
		  <h1><span class="label_type"></span></h1>
		  <span class="num">1</span>
		</header>
		<div class="container">
			<h2>1. 퀀트기술지표</h2>
			<div class="content">
				<div class="unit">
					<h3>기업개요</h3>
					<p class="desc">
					</p>
					<table class="tbl1">
						<colgroup>
							<col width="110px">
						</colgroup>
						<tr>
							<th>섹터</th>
							<td class="bg"><strong class="f16"></strong></td>
						</tr>
                        <tr>
                            <th>대표테마</th>
                            <td><strong id= "keyTheme" class="f16"></strong></td>
                        </tr>
						<tr>
							<th>시총</th>
							<td></td>
						</tr>
						<tr>
							<th>소속테마</th>
							<td><strong id= 'theme' class="f16"></strong></td>
						</tr>
					</table>
				</div>
				<div class="bx_style s_grade">
					<div class="top">
						<div class="tit"><strong>기술경쟁력등급</strong></div>
					</div>
					<div class="cont">
						<div class="coln">
							<div class="ico">
								<strong></strong>
							</div>
							<div class="col" id="tcg1">
								<strong></strong>
							</div>
						</div>
						<div class="txt"> 
							<span>기술경쟁력등급(TCG)은 취득한 특허들을 평가하여 합산한 점수와 이 점수를 기반으로 한 업계순위에 근거하여 생성되었습니다.</span>
						</div>
					</div>
				</div>
				<div class="bx_style unit_score">
					<div class="top">
						<div class="tit"><strong>퀀트기술평가</strong></div>
					</div>
					<div class="cont">
						<div class="bx_score">
							<div class="coln">
								<div class="col">
									<h4>전체 기술주</h4>
									<div class="txt_red" id="score1">
										<span>상위</span> <strong></strong>
									</div>
								</div>
								<div class="col" id="score1_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 70%;"></em></div>
								</div>
							</div>
						</div>
						<div class="bx_score"> 
							<div class="coln">
								<div class="col">
									<h4>섹터</h4>
									<div class="txt_red" id="score2">
										<span>상위</span> <strong></strong>
									</div>
								</div>
								<div class="col" id="score2_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 50%;"></em></div>
								</div>
							</div>
						</div>
						<div class="bx_score"> 
							<div class="coln">
								<div class="col">
									<h4>대표 테마</h4>
									<div class="txt_red" id="score3">
										
									</div>
								</div>
								<div class="col" id="score3_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 70%;"></em></div>
								</div>
							</div>
						</div>
						<div class="desc">
							기술력 순위는 특허 빅데이터 및 ㈜위즈도메인의 특허평가엔진(Patent Evaluation Engine)을 이용하여 산출합니다.<br/>
							평가가 이루어지는 모든 특허 데이터는 특허청에서 제공 받은 정보를 기준으로 작성돠었습니다.
						</div>
					</div>
				</div>
				<div class="bx_style unit_score">
					<div class="top">
						<div class="tit"><strong>기술투자매력도</strong></div>
					</div>
					<div class="cont">
						<div class="bx_score">
							<div class="coln">
								<div class="col">
									<h4>전체 기술주</h4>
									<div class="txt_red" id="score4">
										<span>상위</span> <strong></strong>
									</div>
								</div>
								<div class="col" id="score4_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 90%;"></em></div>
								</div>
							</div>
						</div>
						<div class="bx_score"> 
							<div class="coln">
								<div class="col">
									<h4>섹터</h4>
									<div class="txt_red" id="score5">
										<span>상위</span> <strong></strong>
									</div>
								</div>
								<div class="col" id="score5_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 50%;"></em></div>
								</div>
							</div>
						</div>
						<div class="bx_score"> 
							<div class="coln">
								<div class="col">
									<h4>대표 테마</h4>
									<div class="txt_red" id="score6">
										
									</div>
								</div>
								<div class="col" id="score6_1">
									<p></p>
									<div class="bar_color"><em class="fill" style="width: 10%;"></em></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="bx_style">
					<div class="top">
						<div class="tit"><strong>기업가치추정</strong></div>
					</div>
					<div class="cont">
						<p class="txt_gray">
							섹터 내 기업들의 평균적인 기술력 대비 주가에 비하여 <span class="isuKorNm"></span>의 기술력대비 주가의 상태는 <strong class="txt_black big"></strong> 되어 있습니다.<br/>
						</p> 
						<div class="c_val">
                            <em class="posi"></em>
                        </div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
<script type="text/javascript">
	$(function(){
		let params = {bizNo: getParameter("bizNo"), isuSrtCd: getParameter("isuSrtCd")};
		let query = Object.keys(params).map(k => encodeURIComponent(k) + '=' + encodeURIComponent(params[k])).join('&');
		let url = 'https://c-api.10bagger.co.kr/v1/report/outline?' + query;

		fetch(url)
				.then(res => res.json())
				.then(data => {
					console.log(data)
					$("#reportPage1 .desc").html(data.description);
					$("#reportPage1 .bg").find("strong").html(data.keySectorNm);
					$("#reportPage1 .tbl1").find("#keyTheme").html(data.keyThemeNm);
					
					var mktCap = data.mktCap.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',') + "억원 (" + data.mktCapScale + "주)";
					$("#reportPage1 .tbl1").find("td:eq(2)").html(mktCap)

					var themes = "";
					$.each(data.themes, function(index, row){
						themes += row.themeName + ", ";
					});
					themes = themes.slice(0, -2);
					$("#reportPage1 .tbl1").find("#theme").html(themes);

					$("#reportPage1 .ico").children().html(data.tcg);

					var tcg = data.tcgRatio.split(" ");
					var text = "<strong>동사의 기술 경쟁력은 " + data.tcg +  " 로 업계 " + " <u>" + data.tcgRatio + "</u>로 평가됩니다.</strong>";
					$('#reportPage1 .col#tcg1').prepend(text);

					/* $('#reportPage1 .col.score:eq(0)').children().eq(0).html(data.isuKorNm + " TSS"); */
					$('#reportPage1 #score1').find("strong").html(data.rankTssPer + "%");
					$('#reportPage1 #score1_1').find("p").html("<strong>" + data.rankTssMax + "</strong>" +"개 기업 중 " + "<strong>" + data.rankTss + "</strong>" +"위");
					$('#reportPage1 #score1_1').children().eq(1).children().css('width',calcPercent(data.rankTss, data.rankTssMax));
					/* $('#reportPage1 .col.score:eq(0)').children().eq(4).children().html(data.rankTssMax); */

					$('#reportPage1 #score2').find("strong").html(data.rankTssInKeySectorPer + "%");
					$('#reportPage1 #score2_1').find("p").html("<strong>" + data.rankTssInKeySectorMax + "</strong>" +"개 기업 중 " + "<strong>" + data.rankTssInKeySector + "</strong>" +"위");
					$('#reportPage1 #score2_1').children().eq(1).children().css('width',calcPercent(data.rankTssInKeySector, data.rankTssInKeySectorMax));
					/* $('#reportPage1 .col.score:eq(1)').children().eq(4).children().html(data.rankTssInKeySectorMax); */

					$('#reportPage1 #score3').html("<strong>" + data.rankTssInKeyTheme + "</strong>" + "<strong>" + "위" + "</strong>");
					$('#reportPage1 #score3_1').find("p").html("<strong>" + data.rankTssInKeyThemeMax + "</strong>" + "개 기업 중 " + "<strong>" + data.rankTssInKeyTheme + "</strong>" + "위");
					$('#reportPage1 #score3_1').children().eq(1).children().css('width',calcPercent(data.rankTssInKeyTheme, data.rankTssInKeyThemeMax));

					/* $('#reportPage1 .col.score:eq(3)').children().eq(0).html(data.isuKorNm + " 기술투자지수"); */
					$('#reportPage1 #score4').find("strong").html(data.rankTiiPer + "%");
					$('#reportPage1 #score4_1').find("p").html("<strong>" + data.rankTiiMax + "</strong>" +"개 기업 중 " + "<strong>" + data.rankTii + "</strong>" +"위");
					$('#reportPage1 #score4_1').children().eq(1).children().css('width',calcPercent(data.rankTii, data.rankTiiMax));
					/* $('#reportPage1 .col.score:eq(3)').children().eq(4).children().html(data.rankTiiMax); */


					$('#reportPage1 #score5').find("strong").html(data.rankTiiInKeySectorPer + "%");
					$('#reportPage1 #score5_1').find("p").html("<strong>" + data.rankTiiInKeySectorMax + "</strong>" + "개 기업 중 " + "<strong>" + data.rankTiiInKeySector + "</strong>" +"위");
					$('#reportPage1 #score5_1').children().eq(1).children().css('width',calcPercent(data.rankTiiInKeySector, data.rankTiiInKeySectorMax));
					/* $('#reportPage1 .col.score:eq(4)').children().eq(4).children().html(data.rankTiiInKeySectorMax); */

					$('#reportPage1 #score6').html("<strong>" + data.rankTiiInKeyTheme + "</strong>" + "<strong>" + "위" + "</strong>");
					$('#reportPage1 #score6_1').find("p").html("<strong>" + data.rankTiiInKeyThemeMax + "</strong>" + "개 기업 중 " + "<strong>" + data.rankTiiInKeyTheme + "</strong" + "위");
					$('#reportPage1 #score6_1').children().eq(1).children().css('width',calcPercent(data.rankTiiInKeyTheme, data.rankTiiInKeyThemeMax));

					$('#reportPage1 .big:eq(0)').html(data.estimation);
					//$('#reportPage1 .big:eq(1)').html((data.industryAnnualGrowth * 100).toFixed(1) + "%");

					if(data.estimation == "저평가"){
						$('#reportPage1 .posi').addClass("p1");
					}
					else if(data.estimation == "다소 저평가"){
                        $('#reportPage1 .posi').addClass("p2");
                    }
					else if(data.estimation == "적정"){
					    $('#reportPage1 .posi').addClass("p3");
					}
					else if(data.estimation == "다소 고평가"){
                        $('#reportPage1 .posi').addClass("p4");
                    }
					else if(data.estimation == "고평가"){
					    $('#reportPage1 .posi').addClass("p5");
					}

				})
				.catch(function (error) {
					console.log('request failed', error)
				});


	})

</script>
</body>
</html>